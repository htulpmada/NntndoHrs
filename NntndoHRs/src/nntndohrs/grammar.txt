prog:       definition 
    |       definition prog

definition : varDef
    | funcDef

varDef : ID EQUALS expr SEMI

funcDef : ID OPAREN optPList CPAREN block

idDef : ID
    | ID OPAREN optExprList CPAREN
    | ID OBRACKET expr CBRACKET

operator :  PLUS 
    | MINUS 
    | TIMES 
    | DIVIDE
    | EQUAL
    | NOTEQUAL
    | GREATER
    | LESSTHAN
    | GREATEREQUAL
    | LESSEQUAL
    | INTDIVIDE
    | POWER
    | AND
    | OR
    | DOUBLEEQUAL

expression : unary 
        |   unary op expr

unary : INTEGER
    | STRING
    | idDef
    | NOT unary
    | OPAREN expr CPAREN
    | k_lambda
    | funcDef
    | OBRACKET optExprList CBRACKET
    | NIL
    | BOOLEAN
    | PRINT OPAREN exprList CPAREN
    | APPEND OPAREN exprList CPAREN
    | INSERT OPAREN exprList CPAREN
    | REMOVE OPAREN exprList CPAREN
    | SET OPAREN exprList CPAREN
    | LENGTH OPAREN exprList CPAREN

optExprList:  exprList | EMPTY

exprList: expr
    |   expr COMMA exprList

optPList : EMPTY
    | pList

pList : ID
    | ID COMMA pList

expr : unary
    | unary op expr

block : OCURLY optSList CCURLY

optSList : EMPTY
    | sList

sList : state
    | state sList

state : varDef
    | funcDef
    | expr SEMI
    | whileLoop
    | ifState
    | RETURN expr SEMI

whileLoop : WHILE OPAREN expr CPAREN block

ifState : IF OPAREN expr CPAREN block optElseState

optElseState : EMPTY
    | elseState

elseState : ELSE block
    | ELSE ifState

lambda : LAMBDA OPAREN optPList CPAREN block